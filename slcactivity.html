<!doctype html>
<html lang="ar" dir="rtl">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© - Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100%;
            direction: rtl;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .welcome-screen {
            text-align: center;
            background: rgba(255,255,255,0.1);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .quiz-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .welcome-message {
            font-size: 1.4rem;
            color: white;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .quiz-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .quiz-type-card {
            background: rgba(255,255,255,0.15);
            padding: 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .quiz-type-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255,255,255,0.3);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .quiz-type-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .quiz-type-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: white;
            margin-bottom: 10px;
        }

        .quiz-type-desc {
            color: rgba(255,255,255,0.9);
            line-height: 1.5;
            font-size: 0.95rem;
        }

        .student-input {
            margin: 30px 0;
        }

        .student-name-input {
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            text-align: center;
            width: 250px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .start-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 30px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            margin: 10px;
        }

        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .quiz-area {
            display: none;
        }

        .quiz-header {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .quiz-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .stat-item {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 20px;
            color: white;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .question-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .question-header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .mcq-options {
            display: grid;
            gap: 15px;
        }

        .mcq-option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }

        .mcq-option:hover {
            background: #e3f2fd;
            border-color: #2196f3;
        }

        .mcq-option.selected {
            background: #e8f5e8;
            border-color: #4caf50;
            color: #2e7d32;
        }

        .mcq-option.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .mcq-option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .drag-drop-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 20px 0;
        }

        .drag-items {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            border: 2px dashed #dee2e6;
        }

        .drop-zones {
            display: grid;
            gap: 15px;
        }

        .drag-item {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: #333;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: grab;
            text-align: center;
            font-weight: bold;
            transition: all 0.3s ease;
            user-select: none;
        }

        .drag-item:active {
            cursor: grabbing;
            transform: scale(1.05);
        }

        .drop-zone {
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            padding: 20px;
            border-radius: 10px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .drop-zone.drag-over {
            background: #e3f2fd;
            border-color: #2196f3;
        }

        .drop-zone.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .drop-zone.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .true-false-options {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
        }

        .tf-option {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .tf-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .tf-option.selected {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .tf-option.correct {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .tf-option.incorrect {
            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .action-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .submit-btn {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .show-answer-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
        }

        .next-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .answer-feedback {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: center;
            display: none;
            animation: slideDown 0.5s ease;
        }

        .answer-feedback.visible {
            display: block;
        }

        .feedback-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .feedback-text {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .results-screen {
            display: none;
            text-align: center;
            background: rgba(255,255,255,0.1);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .final-score {
            font-size: 3rem;
            font-weight: bold;
            color: #feca57;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .performance-message {
            font-size: 1.3rem;
            color: white;
            margin: 20px 0;
        }

        .leaderboard {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
        }

        .leaderboard-title {
            font-size: 1.5rem;
            color: white;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255,255,255,0.1);
            padding: 12px 20px;
            margin: 8px 0;
            border-radius: 10px;
            color: white;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            z-index: 1000;
            font-weight: bold;
            animation: slideDown 0.3s ease;
        }

        @media (max-width: 768px) {
            .quiz-title {
                font-size: 2rem;
            }
            
            .drag-drop-area {
                grid-template-columns: 1fr;
            }
            
            .true-false-options {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            
            .action-buttons {
                gap: 10px;
            }
            
            .action-btn {
                padding: 10px 20px;
                font-size: 1rem;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="container"><!-- Welcome Screen -->
   <div id="welcome-screen" class="welcome-screen">
    <h1 class="quiz-title" id="quiz-title">Ù…Ø³Ø§Ø¨Ù‚Ø© Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</h1>
    <p class="welcome-message" id="welcome-message">Ø§Ø®ØªØ¨Ø± Ù…Ø¹Ø±ÙØªÙƒ ÙÙŠ Ù…Ø±Ø§Ø­Ù„ Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ù†Ø¸Ø§Ù…!</p>
    <div class="quiz-types">
     <div class="quiz-type-card" onclick="selectQuizType('mcq')">
      <div class="quiz-type-icon">
       ğŸ¯
      </div>
      <div class="quiz-type-title">
       Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯
      </div>
      <div class="quiz-type-desc">
       Ø£Ø³Ø¦Ù„Ø© Ù…Ø¹ 4 Ø®ÙŠØ§Ø±Ø§Øª Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø©
      </div>
     </div>
     <div class="quiz-type-card" onclick="selectQuizType('drag-drop')">
      <div class="quiz-type-icon">
       ğŸ”„
      </div>
      <div class="quiz-type-title">
       Ø³Ø­Ø¨ ÙˆØ¥ÙÙ„Ø§Øª
      </div>
      <div class="quiz-type-desc">
       Ø§Ø³Ø­Ø¨ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù„Ù…ÙƒØ§Ù†Ù‡Ø§ Ø§Ù„ØµØ­ÙŠØ­
      </div>
     </div>
     <div class="quiz-type-card" onclick="selectQuizType('true-false')">
      <div class="quiz-type-icon">
       âœ…
      </div>
      <div class="quiz-type-title">
       ØµØ­ Ø£Ù… Ø®Ø·Ø£
      </div>
      <div class="quiz-type-desc">
       Ø­Ø¯Ø¯ ØµØ­Ø© Ø§Ù„Ø¹Ø¨Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø¹Ø·Ø§Ø©
      </div>
     </div>
    </div>
    <div class="student-input"><input type="text" id="student-name" class="student-name-input" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ">
    </div><button class="start-btn" id="start-btn" onclick="startQuiz()" style="display: none;"> <span id="start-button-text">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</span> </button>
   </div><!-- Quiz Area -->
   <div id="quiz-area" class="quiz-area">
    <div class="quiz-header">
     <div class="quiz-stats">
      <div class="stat-item"><span>ğŸ“Š</span> <span id="question-counter">1/5</span>
      </div>
      <div class="stat-item"><span>ğŸ†</span> <span id="current-score">0</span>
      </div>
      <div class="stat-item"><span>âœ…</span> <span id="correct-count">0</span>
      </div>
     </div>
    </div>
    <div class="question-container">
     <div class="question-header" id="question-type-header">
      ğŸ¯ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯
     </div>
     <div class="question-text" id="question-text">
      Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªÙŠ ØªØªØ¶Ù…Ù† Ø¬Ù…Ø¹ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†ØŸ
     </div><!-- MCQ Options -->
     <div id="mcq-container" class="mcq-options">
      <div class="mcq-option" onclick="selectMCQOption(0)">
       Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„
      </div>
      <div class="mcq-option" onclick="selectMCQOption(1)">
       Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØµÙ…ÙŠÙ…
      </div>
      <div class="mcq-option" onclick="selectMCQOption(2)">
       Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ·ÙˆÙŠØ±
      </div>
      <div class="mcq-option" onclick="selectMCQOption(3)">
       Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
      </div>
     </div><!-- Drag & Drop -->
     <div id="drag-drop-container" class="drag-drop-area" style="display: none;">
      <div class="drag-items">
       <h4 style="text-align: center; margin-bottom: 15px;">Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…ØªØ§Ø­Ø©:</h4>
       <div id="drag-items-list">
        <div class="drag-item" draggable="true" data-item="functional">
         Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©
        </div>
        <div class="drag-item" draggable="true" data-item="non-functional">
         Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª ØºÙŠØ± Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©
        </div>
        <div class="drag-item" draggable="true" data-item="user-interface">
         ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        </div>
        <div class="drag-item" draggable="true" data-item="database">
         Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        </div>
       </div>
      </div>
      <div class="drop-zones">
       <div class="drop-zone" data-category="analysis" ondrop="drop(event)" ondragover="allowDrop(event)"><span>Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„</span>
       </div>
       <div class="drop-zone" data-category="design" ondrop="drop(event)" ondragover="allowDrop(event)"><span>Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØµÙ…ÙŠÙ…</span>
       </div>
      </div>
     </div><!-- True/False -->
     <div id="true-false-container" class="true-false-options" style="display: none;"><button class="tf-option" onclick="selectTFOption(true)">âœ… ØµØ­</button> <button class="tf-option" onclick="selectTFOption(false)">âŒ Ø®Ø·Ø£</button>
     </div>
     <div class="answer-feedback" id="answer-feedback">
      <div class="feedback-icon" id="feedback-icon">
       âœ…
      </div>
      <div class="feedback-text" id="feedback-text">
       Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!
      </div>
     </div>
     <div class="action-buttons"><button class="action-btn submit-btn" id="submit-btn" onclick="submitAnswer()"> ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© </button> <button class="action-btn show-answer-btn" id="show-answer-btn" onclick="showAnswer()"> Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© </button> <button class="action-btn next-btn" id="next-btn" onclick="nextQuestion()" style="display: none;"> Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ </button>
     </div>
    </div>
   </div><!-- Results Screen -->
   <div id="results-screen" class="results-screen">
    <h2 style="color: white; font-size: 2rem; margin-bottom: 20px;">ğŸ‰ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©!</h2>
    <div class="final-score" id="final-score">
     0/5
    </div>
    <div class="performance-message" id="performance-message">
     Ø£ÙƒÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­!
    </div>
    <div class="leaderboard">
     <div class="leaderboard-title">
      ğŸ† Ø£ÙØ¶Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
     </div>
     <div id="leaderboard-list">
      <div class="loading"></div>
     </div>
    </div>
    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 30px; flex-wrap: wrap;"><button class="start-btn" onclick="restartQuiz()"> Ù…Ø³Ø§Ø¨Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø© </button> <button class="start-btn" onclick="changeQuizType()" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);"> ØªØºÙŠÙŠØ± Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© </button>
    </div>
   </div>
  </div>
  <script>
        const defaultConfig = {
            quiz_title: "Ù…Ø³Ø§Ø¨Ù‚Ø© Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ù†Ø¸Ø§Ù…",
            welcome_message: "Ø§Ø®ØªØ¨Ø± Ù…Ø¹Ø±ÙØªÙƒ ÙÙŠ Ù…Ø±Ø§Ø­Ù„ Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ù†Ø¸Ø§Ù…!",
            start_button_text: "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©"
        };

        let currentRecordCount = 0;
        let quizState = {
            studentName: '',
            selectedQuizType: '',
            currentQuestion: 0,
            score: 0,
            correctAnswers: 0,
            questions: [],
            userAnswers: [],
            startTime: null
        };

        const questionsData = {
            mcq: [
                {
                    question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªÙŠ ØªØªØ¶Ù…Ù† Ø¬Ù…Ø¹ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†ØŸ",
                    options: ["Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„", "Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØµÙ…ÙŠÙ…", "Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ·ÙˆÙŠØ±", "Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±"],
                    correct: 0,
                    explanation: "Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ù‡ÙŠ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø§Ù„ØªÙŠ ØªØ±ÙƒØ² Ø¹Ù„Ù‰ ÙÙ‡Ù… Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ¬Ù…Ø¹ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª."
                },
                {
                    question: "Ø£ÙŠ Ù…Ù† Ø§Ù„ØªØ§Ù„ÙŠ ÙŠØ­Ø¯Ø« ÙÙŠ Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØµÙ…ÙŠÙ…ØŸ",
                    options: ["ÙƒØªØ§Ø¨Ø© Ø§Ù„ÙƒÙˆØ¯", "Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø®Ø·Ø·Ø§Øª", "Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù…", "ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"],
                    correct: 1,
                    explanation: "Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØµÙ…ÙŠÙ… ØªØ±ÙƒØ² Ø¹Ù„Ù‰ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø®Ø·Ø·Ø§Øª ÙˆØ§Ù„Ù†Ù…Ø§Ø°Ø¬ ÙˆØªØµÙ…ÙŠÙ… Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…."
                },
                {
                    question: "Ù…ØªÙ‰ ÙŠØªÙ… Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ¥ØµÙ„Ø§Ø­Ù‡Ø§ØŸ",
                    options: ["Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„", "Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØµÙ…ÙŠÙ…", "Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±", "Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªÙˆØ«ÙŠÙ‚"],
                    correct: 2,
                    explanation: "Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø®ØµØµØ© Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ§Ù„Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ¥ØµÙ„Ø§Ø­Ù‡Ø§."
                },
                {
                    question: "Ù…Ø§ Ù‡ÙŠ Ø£Ø·ÙˆÙ„ Ù…Ø±Ø­Ù„Ø© ÙÙŠ Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ù†Ø¸Ø§Ù…ØŸ",
                    options: ["Ø§Ù„ØªØ­Ù„ÙŠÙ„", "Ø§Ù„ØªØ·ÙˆÙŠØ±", "Ø§Ù„ØµÙŠØ§Ù†Ø©", "Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±"],
                    correct: 2,
                    explanation: "Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø© Ù‡ÙŠ Ø§Ù„Ø£Ø·ÙˆÙ„ Ù„Ø£Ù†Ù‡Ø§ ØªØ³ØªÙ…Ø± Ø·ÙˆØ§Ù„ ÙØªØ±Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…."
                },
                {
                    question: "Ø£ÙŠ Ù…Ø±Ø­Ù„Ø© ØªØªØ¶Ù…Ù† ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†ØŸ",
                    options: ["Ø§Ù„ØªØµÙ…ÙŠÙ…", "Ø§Ù„ØªØ·ÙˆÙŠØ±", "Ø§Ù„ØªÙ†ÙÙŠØ°", "Ø§Ù„ØµÙŠØ§Ù†Ø©"],
                    correct: 2,
                    explanation: "Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªÙ†ÙÙŠØ° ØªØªØ¶Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡."
                }
            ],
            "drag-drop": [
                {
                    question: "Ø§Ø³Ø­Ø¨ ÙƒÙ„ Ø¹Ù†ØµØ± Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©:",
                    items: [
                        { id: "functional", text: "Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©", category: "analysis" },
                        { id: "non-functional", text: "Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª ØºÙŠØ± Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©", category: "analysis" },
                        { id: "user-interface", text: "ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…", category: "design" },
                        { id: "database", text: "Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª", category: "design" }
                    ],
                    zones: [
                        { id: "analysis", text: "Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„" },
                        { id: "design", text: "Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØµÙ…ÙŠÙ…" }
                    ],
                    explanation: "Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª ØªÙØ¬Ù…Ø¹ ÙÙŠ Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ØŒ Ø¨ÙŠÙ†Ù…Ø§ Ø§Ù„ØªØµØ§Ù…ÙŠÙ… ØªÙÙ†Ø´Ø£ ÙÙŠ Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØµÙ…ÙŠÙ…."
                },
                {
                    question: "Ø¶Ø¹ ÙƒÙ„ Ù†Ø´Ø§Ø· ÙÙŠ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©:",
                    items: [
                        { id: "coding", text: "ÙƒØªØ§Ø¨Ø© Ø§Ù„ÙƒÙˆØ¯", category: "development" },
                        { id: "testing", text: "Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØ­Ø¯Ø§Øª", category: "testing" },
                        { id: "deployment", text: "Ù†Ø´Ø± Ø§Ù„Ù†Ø¸Ø§Ù…", category: "implementation" },
                        { id: "maintenance", text: "Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡", category: "maintenance" }
                    ],
                    zones: [
                        { id: "development", text: "Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ·ÙˆÙŠØ±" },
                        { id: "testing", text: "Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±" },
                        { id: "implementation", text: "Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªÙ†ÙÙŠØ°" },
                        { id: "maintenance", text: "Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©" }
                    ],
                    explanation: "ÙƒÙ„ Ù†Ø´Ø§Ø· ÙŠÙ†ØªÙ…ÙŠ Ù„Ù…Ø±Ø­Ù„Ø© Ù…Ø­Ø¯Ø¯Ø© Ø­Ø³Ø¨ Ø·Ø¨ÙŠØ¹Ø© Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨."
                }
            ],
            "true-false": [
                {
                    question: "Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø© ØªØ£ØªÙŠ Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†ÙÙŠØ° Ù…Ø¨Ø§Ø´Ø±Ø©.",
                    correct: true,
                    explanation: "ØµØ­ÙŠØ­ - Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø© ØªØ¨Ø¯Ø£ ÙÙˆØ± ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØªØ³ØªÙ…Ø± Ø·ÙˆØ§Ù„ ÙØªØ±Ø© Ø­ÙŠØ§ØªÙ‡."
                },
                {
                    question: "ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø¨Ù„ Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØµÙ…ÙŠÙ….",
                    correct: false,
                    explanation: "Ø®Ø·Ø£ - ÙŠØ¬Ø¨ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø£ÙˆÙ„Ø§Ù‹ Ù„Ø¶Ù…Ø§Ù† ÙˆØ¶ÙˆØ­ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„ØªØ·ÙˆÙŠØ±."
                },
                {
                    question: "Ø§Ù„ØªÙˆØ«ÙŠÙ‚ ÙŠØ­Ø¯Ø« ÙÙ‚Ø· ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹.",
                    correct: false,
                    explanation: "Ø®Ø·Ø£ - Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø¹Ù…Ù„ÙŠØ© Ù…Ø³ØªÙ…Ø±Ø© ØªØ­Ø¯Ø« ÙÙŠ Ø¬Ù…ÙŠØ¹ Ù…Ø±Ø§Ø­Ù„ Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ù†Ø¸Ø§Ù…."
                },
                {
                    question: "Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ù‡ÙŠ Ø£Ù‡Ù… Ù…Ø±Ø­Ù„Ø© ÙÙŠ Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ù†Ø¸Ø§Ù….",
                    correct: true,
                    explanation: "ØµØ­ÙŠØ­ - Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ø£Ù† Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙÙŠÙ‡Ø§ ØªØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø§Ù„ØªØ§Ù„ÙŠØ©."
                },
                {
                    question: "ÙŠÙ…ÙƒÙ† ØªØ®Ø·ÙŠ Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø·ÙˆØ±ÙˆÙ† Ø®Ø¨Ø±Ø§Ø¡.",
                    correct: false,
                    explanation: "Ø®Ø·Ø£ - Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¶Ø±ÙˆØ±ÙŠØ© Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù„Ø¶Ù…Ø§Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ù‡Ù…Ø§ ÙƒØ§Ù†Øª Ø®Ø¨Ø±Ø© Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ†."
                }
            ]
        };

        const dataHandler = {
            onDataChanged(data) {
                currentRecordCount = data.length;
                updateLeaderboard(data);
            }
        };

        async function initializeDataSdk() {
            if (window.dataSdk) {
                const result = await window.dataSdk.init(dataHandler);
                if (!result.isOk) {
                    console.error("Failed to initialize data SDK");
                }
            }
        }

        function selectQuizType(type) {
            quizState.selectedQuizType = type;
            
            // Update UI to show selected type
            document.querySelectorAll('.quiz-type-card').forEach(card => {
                card.style.borderColor = 'transparent';
            });
            
            event.target.closest('.quiz-type-card').style.borderColor = 'rgba(255,255,255,0.5)';
            
            // Show start button
            document.getElementById('start-btn').style.display = 'inline-block';
            
            showToast(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: ${getQuizTypeName(type)}`);
        }

        function getQuizTypeName(type) {
            const names = {
                'mcq': 'Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯',
                'drag-drop': 'Ø³Ø­Ø¨ ÙˆØ¥ÙÙ„Ø§Øª',
                'true-false': 'ØµØ­ Ø£Ù… Ø®Ø·Ø£'
            };
            return names[type] || type;
        }

        function startQuiz() {
            const studentName = document.getElementById('student-name').value.trim();
            if (!studentName) {
                showToast('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }

            if (!quizState.selectedQuizType) {
                showToast('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }

            quizState.studentName = studentName;
            quizState.questions = [...questionsData[quizState.selectedQuizType]];
            quizState.startTime = new Date();
            
            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('quiz-area').style.display = 'block';
            
            setupQuizInterface();
            showQuestion();
        }

        function setupQuizInterface() {
            const headers = {
                'mcq': 'ğŸ¯ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯',
                'drag-drop': 'ğŸ”„ Ø³Ø­Ø¨ ÙˆØ¥ÙÙ„Ø§Øª',
                'true-false': 'âœ… ØµØ­ Ø£Ù… Ø®Ø·Ø£'
            };
            
            document.getElementById('question-type-header').textContent = headers[quizState.selectedQuizType];
            
            // Hide all question containers
            document.getElementById('mcq-container').style.display = 'none';
            document.getElementById('drag-drop-container').style.display = 'none';
            document.getElementById('true-false-container').style.display = 'none';
            
            // Show relevant container
            if (quizState.selectedQuizType === 'mcq') {
                document.getElementById('mcq-container').style.display = 'grid';
            } else if (quizState.selectedQuizType === 'drag-drop') {
                document.getElementById('drag-drop-container').style.display = 'grid';
                setupDragAndDrop();
            } else if (quizState.selectedQuizType === 'true-false') {
                document.getElementById('true-false-container').style.display = 'flex';
            }
        }

        function showQuestion() {
            const question = quizState.questions[quizState.currentQuestion];
            if (!question) {
                endQuiz();
                return;
            }

            document.getElementById('question-text').textContent = question.question;
            
            if (quizState.selectedQuizType === 'mcq') {
                showMCQQuestion(question);
            } else if (quizState.selectedQuizType === 'drag-drop') {
                showDragDropQuestion(question);
            } else if (quizState.selectedQuizType === 'true-false') {
                showTrueFalseQuestion(question);
            }
            
            // Reset UI
            resetQuestionUI();
            updateQuizStats();
        }

        function showMCQQuestion(question) {
            const options = document.querySelectorAll('.mcq-option');
            options.forEach((option, index) => {
                option.textContent = question.options[index];
                option.className = 'mcq-option';
                option.onclick = () => selectMCQOption(index);
            });
        }

        function showDragDropQuestion(question) {
            const itemsList = document.getElementById('drag-items-list');
            itemsList.innerHTML = '';
            
            question.items.forEach(item => {
                const dragItem = document.createElement('div');
                dragItem.className = 'drag-item';
                dragItem.draggable = true;
                dragItem.dataset.item = item.id;
                dragItem.dataset.category = item.category;
                dragItem.textContent = item.text;
                itemsList.appendChild(dragItem);
            });
            
            // Reset drop zones
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.className = 'drop-zone';
                zone.innerHTML = `<span>${question.zones.find(z => z.id === zone.dataset.category)?.text || zone.dataset.category}</span>`;
            });
            
            setupDragAndDrop();
        }

        function showTrueFalseQuestion(question) {
            document.querySelectorAll('.tf-option').forEach(option => {
                option.className = 'tf-option';
            });
        }

        function resetQuestionUI() {
            document.getElementById('answer-feedback').classList.remove('visible');
            document.getElementById('submit-btn').style.display = 'inline-block';
            document.getElementById('show-answer-btn').style.display = 'inline-block';
            document.getElementById('next-btn').style.display = 'none';
            
            quizState.userAnswers[quizState.currentQuestion] = null;
        }

        function selectMCQOption(index) {
            document.querySelectorAll('.mcq-option').forEach((option, i) => {
                option.classList.toggle('selected', i === index);
            });
            quizState.userAnswers[quizState.currentQuestion] = index;
        }

        function selectTFOption(answer) {
            document.querySelectorAll('.tf-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            event.target.classList.add('selected');
            quizState.userAnswers[quizState.currentQuestion] = answer;
        }

        function setupDragAndDrop() {
            const dragItems = document.querySelectorAll('.drag-item');
            
            dragItems.forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', JSON.stringify({
                        id: item.dataset.item,
                        category: item.dataset.category,
                        text: item.textContent
                    }));
                });
            });
        }

        function allowDrop(e) {
            e.preventDefault();
            e.target.closest('.drop-zone').classList.add('drag-over');
        }

        function drop(e) {
            e.preventDefault();
            const dropZone = e.target.closest('.drop-zone');
            dropZone.classList.remove('drag-over');
            
            const data = JSON.parse(e.dataTransfer.getData('text/plain'));
            const dragItem = document.querySelector(`[data-item="${data.id}"]`);
            
            if (dragItem && dropZone) {
                dropZone.innerHTML = `<span>${data.text}</span>`;
                dragItem.style.display = 'none';
                
                // Store answer
                if (!quizState.userAnswers[quizState.currentQuestion]) {
                    quizState.userAnswers[quizState.currentQuestion] = {};
                }
                quizState.userAnswers[quizState.currentQuestion][data.id] = dropZone.dataset.category;
            }
        }

        function submitAnswer() {
            const question = quizState.questions[quizState.currentQuestion];
            let isCorrect = false;
            
            if (quizState.selectedQuizType === 'mcq') {
                isCorrect = quizState.userAnswers[quizState.currentQuestion] === question.correct;
                showMCQFeedback(isCorrect, question);
            } else if (quizState.selectedQuizType === 'drag-drop') {
                isCorrect = checkDragDropAnswer(question);
                showDragDropFeedback(isCorrect, question);
            } else if (quizState.selectedQuizType === 'true-false') {
                isCorrect = quizState.userAnswers[quizState.currentQuestion] === question.correct;
                showTrueFalseFeedback(isCorrect, question);
            }
            
            if (isCorrect) {
                quizState.score++;
                quizState.correctAnswers++;
            }
            
            showAnswerFeedback(isCorrect, question.explanation);
            
            document.getElementById('submit-btn').style.display = 'none';
            document.getElementById('show-answer-btn').style.display = 'none';
            document.getElementById('next-btn').style.display = 'inline-block';
            
            updateQuizStats();
        }

        function showAnswer() {
            const question = quizState.questions[quizState.currentQuestion];
            
            if (quizState.selectedQuizType === 'mcq') {
                showMCQFeedback(false, question, true);
            } else if (quizState.selectedQuizType === 'drag-drop') {
                showDragDropFeedback(false, question, true);
            } else if (quizState.selectedQuizType === 'true-false') {
                showTrueFalseFeedback(false, question, true);
            }
            
            showAnswerFeedback(false, question.explanation, true);
            
            document.getElementById('submit-btn').style.display = 'none';
            document.getElementById('show-answer-btn').style.display = 'none';
            document.getElementById('next-btn').style.display = 'inline-block';
        }

        function showMCQFeedback(isCorrect, question, showingAnswer = false) {
            const options = document.querySelectorAll('.mcq-option');
            options.forEach((option, index) => {
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (!showingAnswer && quizState.userAnswers[quizState.currentQuestion] === index) {
                    option.classList.add('incorrect');
                }
            });
        }

        function showDragDropFeedback(isCorrect, question, showingAnswer = false) {
            question.items.forEach(item => {
                const correctZone = document.querySelector(`[data-category="${item.category}"]`);
                if (correctZone) {
                    correctZone.classList.add('correct');
                }
            });
        }

        function showTrueFalseFeedback(isCorrect, question, showingAnswer = false) {
            document.querySelectorAll('.tf-option').forEach(option => {
                const optionValue = option.textContent.includes('ØµØ­');
                if (optionValue === question.correct) {
                    option.classList.add('correct');
                } else if (!showingAnswer && quizState.userAnswers[quizState.currentQuestion] === optionValue) {
                    option.classList.add('incorrect');
                }
            });
        }

        function checkDragDropAnswer(question) {
            const userAnswer = quizState.userAnswers[quizState.currentQuestion];
            if (!userAnswer) return false;
            
            return question.items.every(item => 
                userAnswer[item.id] === item.category
            );
        }

        function showAnswerFeedback(isCorrect, explanation, showingAnswer = false) {
            const feedback = document.getElementById('answer-feedback');
            const icon = document.getElementById('feedback-icon');
            const text = document.getElementById('feedback-text');
            
            if (showingAnswer) {
                icon.textContent = 'ğŸ’¡';
                text.innerHTML = `<strong>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©:</strong><br>${explanation}`;
            } else if (isCorrect) {
                icon.textContent = 'âœ…';
                text.innerHTML = `<strong>Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!</strong><br>${explanation}`;
            } else {
                icon.textContent = 'âŒ';
                text.innerHTML = `<strong>Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©</strong><br>${explanation}`;
            }
            
            feedback.classList.add('visible');
        }

        function nextQuestion() {
            quizState.currentQuestion++;
            showQuestion();
        }

        function updateQuizStats() {
            document.getElementById('question-counter').textContent = 
                `${quizState.currentQuestion + 1}/${quizState.questions.length}`;
            document.getElementById('current-score').textContent = quizState.score;
            document.getElementById('correct-count').textContent = quizState.correctAnswers;
        }

        async function endQuiz() {
            document.getElementById('quiz-area').style.display = 'none';
            document.getElementById('results-screen').style.display = 'block';
            
            const finalScore = `${quizState.score}/${quizState.questions.length}`;
            document.getElementById('final-score').textContent = finalScore;
            
            // Performance message
            const percentage = (quizState.score / quizState.questions.length) * 100;
            let message = '';
            
            if (percentage >= 80) {
                message = 'ğŸŒŸ Ø£Ø¯Ø§Ø¡ Ù…Ù…ØªØ§Ø²! Ø£Ù†Øª Ø®Ø¨ÙŠØ± ÙÙŠ Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ù†Ø¸Ø§Ù…!';
            } else if (percentage >= 60) {
                message = 'ğŸ‘ Ø£Ø¯Ø§Ø¡ Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹! ØªØ­ØªØ§Ø¬ Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¨Ø³ÙŠØ·Ø©';
            } else if (percentage >= 40) {
                message = 'ğŸ“š Ø£Ø¯Ø§Ø¡ Ù…Ù‚Ø¨ÙˆÙ„ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ­Ø³Ù† Ø£ÙƒØ«Ø±';
            } else {
                message = 'ğŸ’ª ØªØ­ØªØ§Ø¬ Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ§Ù„Ù…Ù…Ø§Ø±Ø³Ø©';
            }
            
            document.getElementById('performance-message').textContent = message;

            // Save result to Data SDK
            if (window.dataSdk && currentRecordCount < 999) {
                const completionTime = new Date().toISOString();
                const quizResult = {
                    student_name: quizState.studentName,
                    quiz_score: quizState.score,
                    total_questions: quizState.questions.length,
                    correct_answers: quizState.correctAnswers,
                    completion_time: completionTime,
                    quiz_type: getQuizTypeName(quizState.selectedQuizType)
                };

                const result = await window.dataSdk.create(quizResult);
                if (!result.isOk) {
                    showToast('ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø©');
                }
            } else if (currentRecordCount >= 999) {
                showToast('ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©');
            }
        }

        function updateLeaderboard(data) {
            const leaderboardList = document.getElementById('leaderboard-list');
            
            if (data.length === 0) {
                leaderboardList.innerHTML = '<div style="color: rgba(255,255,255,0.7); text-align: center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø¹Ø¯</div>';
                return;
            }

            const sortedData = data.sort((a, b) => {
                const scoreA = a.quiz_score / a.total_questions;
                const scoreB = b.quiz_score / b.total_questions;
                return scoreB - scoreA;
            }).slice(0, 5);
            
            leaderboardList.innerHTML = sortedData.map((record, index) => `
                <div class="leaderboard-item">
                    <span>${index + 1}. ${record.student_name} (${record.quiz_type})</span>
                    <span>${record.quiz_score}/${record.total_questions}</span>
                </div>
            `).join('');
        }

        function restartQuiz() {
            quizState = {
                studentName: '',
                selectedQuizType: '',
                currentQuestion: 0,
                score: 0,
                correctAnswers: 0,
                questions: [],
                userAnswers: [],
                startTime: null
            };
            
            document.getElementById('results-screen').style.display = 'none';
            document.getElementById('welcome-screen').style.display = 'block';
            document.getElementById('student-name').value = '';
            document.getElementById('start-btn').style.display = 'none';
            
            // Reset quiz type selection
            document.querySelectorAll('.quiz-type-card').forEach(card => {
                card.style.borderColor = 'transparent';
            });
        }

        function changeQuizType() {
            restartQuiz();
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                if (document.body.contains(toast)) {
                    document.body.removeChild(toast);
                }
            }, 3000);
        }

        async function onConfigChange(config) {
            const titleElement = document.getElementById('quiz-title');
            const messageElement = document.getElementById('welcome-message');
            const startBtnElement = document.getElementById('start-button-text');
            
            if (titleElement) {
                titleElement.textContent = config.quiz_title || defaultConfig.quiz_title;
            }
            
            if (messageElement) {
                messageElement.textContent = config.welcome_message || defaultConfig.welcome_message;
            }
            
            if (startBtnElement) {
                startBtnElement.textContent = config.start_button_text || defaultConfig.start_button_text;
            }
        }

        function mapToCapabilities(config) {
            return {
                recolorables: [],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ['quiz_title', config.quiz_title || defaultConfig.quiz_title],
                ['welcome_message', config.welcome_message || defaultConfig.welcome_message],
                ['start_button_text', config.start_button_text || defaultConfig.start_button_text]
            ]);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', async () => {
            await initializeDataSdk();
            
            if (window.elementSdk) {
                window.elementSdk.init({
                    defaultConfig,
                    onConfigChange,
                    mapToCapabilities,
                    mapToEditPanelValues
                });
            }
        });
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9acbeca4766ecdf4',t:'MTc2NTUyODkwNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
